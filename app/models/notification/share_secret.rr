class Notification::ShareSecret < Notification::Base
  
  validates_each :subject do |record, attr, subject|
    record.errors.add(attr, "#{subject} is not a secret") unless subject.kind_of?(Secret)
  end
  
  validates_each :recipient do |record, attr, user|
    record.errors.add(attr, "#{user} is not party to the secret") if user && record.subject && user !=record.subject.try(:user)
  end
  
end